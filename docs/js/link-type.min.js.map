{"version":3,"sources":["link-type.js"],"names":["window","NS","setClass","tar","cls","enabled","val","key","substr","startsWith","dataset","c","join","classList","add","remove","ALLOWED_CLASSES","EXT_TABLE","doc","docx","xls","xlsx","ppt","pptx","pdf","addClass","a","url","opts","isLinkImage","styleLinkImage","className","childNodes","length","isLinkEmpty","cs","nodeType","tagName","getComputedStyle","display","includes","isLinkSimple","styleLinkSimple","innerHTML","trim","isLinkSimpleUrl","addClassByUrl","split","allowedClasses","ok","outIsUp","p","indexOf","id","substring","t","document","getElementById","location","href","replace","hash","from","getBoundingClientRect","top","isUrlAnchor","isUrlExternal","styleLinkExternal","styleLinkAnchor","extTab","endsWith","d","s","lastIndexOf","toLowerCase","getFileType","extensionTable","styleLinkFile","protocol","host","match","linkApply","as","Object","assign","getAttribute","linkApplyByUrl","linkIsLinkImage"],"mappings":"AAUAA,OAAM,MAAYA,OAAM,OAAa,GAGrC,SAAWC,GA0MV,SAASC,EAASC,EAAKC,EAAKC,GAAU,EAAMC,EAAM,IACjD,MAAMC,EAAMH,EAAII,OAAO,GACvB,GAAIJ,EAAIK,WAAW,KACdJ,EACHF,EAAIO,QAAQH,GAAOD,SAEZH,EAAIO,QAAQH,OAEd,CACN,MAAMI,EAAI,CAACJ,EAAKD,GAAKM,KAAK,KACtBP,EACHF,EAAIU,UAAUC,IAAIH,GAElBR,EAAIU,UAAUE,OAAOJ,KArNxB,WA0CC,MAAMK,EAAkB,CACvB,YACA,cACA,aACA,iBACA,aACA,oBACA,cACA,oBACA,oBACA,aACA,aAGKC,EAAY,CACjBC,IAAM,MACNC,KAAM,MACNC,IAAM,MACNC,KAAM,MACNC,IAAM,MACNC,KAAM,MACNC,IAAM,OAOP,SAASC,EAASC,EAAGC,EAAKC,GACrBC,EAAYH,GACfxB,EAASwB,EAAGE,EAAKE,iBAiDnB,SAAqBJ,GACpB,OAAQA,EAAEK,WAAqC,IAAxBL,EAAEM,WAAWC,OAhD/BC,CAAYR,GAgClB,SAAsBA,GACrB,GAAIA,EAAEK,UAAW,OAAO,EACxB,MAAMI,EAAKT,EAAEM,WACb,GAAkB,IAAdG,EAAGF,OAAc,OAAO,EAC5B,IAAK,MAAMtB,KAAKwB,EAAI,CACnB,GAAIxB,EAAEoB,UAAW,OAAO,EACxB,GAAmB,IAAfpB,EAAEyB,UACa,OAAdzB,EAAE0B,UAAqBC,iBAAiB3B,GAAG4B,QAAQC,SAAS,UAC/D,OAAO,EAIV,OAAO,EA1CKC,CAAaf,KACvBxB,EAASwB,EAAGE,EAAKc,iBAgDpB,SAAyBhB,EAAGC,GAC3B,OAAe,OAARA,GAAwB,KAARA,GAAcD,EAAEM,WAAWC,QAAUP,EAAEiB,UAAUC,SAAWjB,EAhD7EkB,CAAgBnB,EAAGC,IACtBzB,EAASwB,EAAGE,EAAKc,iBAAiB,EAAM,OAEzCI,EAAcpB,EAAGC,EAAKC,IANtBkB,EAAcpB,EAAGC,EAAKC,GAWzB,SAASC,EAAYH,EAAGE,GACvB,GAAIF,EAAEK,UACL,IAAK,MAAMpB,KAAKe,EAAEK,UAAUgB,MAAM,KACjC,IAAKnB,EAAKoB,eAAeR,SAAS7B,GAAI,OAAO,EAG/C,IAAIsC,GAAK,EACT,IAAK,MAAMtC,KAAKe,EAAEM,WACjB,GAAmB,IAAfrB,EAAEyB,SAAgB,CACrB,GAAKa,GAAoB,QAAdtC,EAAE0B,QAEN,CACNY,GAAK,EACL,MAHAA,GAAK,EAOR,OAAOA,EA8BR,SAASH,EAAcpB,EAAGC,EAAKC,GAC9B,MAAMsB,EAAU,EAAC,IAsGnB,SAAqBvB,EAAKD,EAAI,KAAMwB,EAAU,MAC7C,GAAY,OAARvB,GAAwB,KAARA,EAAY,CAC/B,MAAMwB,EAAIxB,EAAIyB,QAAQ,KACtB,IAAW,IAAPD,EAAU,CACb,MAAME,EAAK1B,EAAI2B,UAAUH,EAAI,GAC7B,GAAIE,EAAGpB,OAAQ,CACd,MAAMsB,EAAIC,SAASC,eAAeJ,GAClC,GAAU,OAANE,IAEI,IAANJ,GACAxB,EAAI2B,UAAU,EAAGH,KAAOO,SAASC,KAAKC,QAAQF,SAASG,KAAOH,SAASG,KAAO,IAAK,KAClF,CACD,GAAInC,GAAKwB,EAAS,CACjB,MAAMY,EAAOpC,EAAEqC,wBAAwBC,IAC1BT,EAAEQ,wBAAwBC,IAC9BF,IAAMZ,EAAQ,IAAK,GAE7B,OAAO,KAMZ,OAAO,EA5HFe,CAAYtC,EAAKD,EAAGwB,GAEbtB,EAAKsC,cAAcvC,IAC7BzB,EAASwB,EAAGE,EAAKuC,mBAFjBjE,EAASwB,EAAGE,EAAKwC,iBAAiB,EAAMlB,EAAQ,GAAK,KAAO,IAI7D,MAAMK,EAkBP,SAAqB5B,EAAK0C,GACzB,GAAY,OAAR1C,GAAwB,KAARA,IAAeA,EAAI2C,SAAS,KAAM,CACrD,MAAMC,EAAI5C,EAAIyB,QAAQ,MACtB,IAAW,IAAPmB,EAAU,CACb,MAAMC,EAAI7C,EAAIyB,QAAQ,IAAKmB,EAAI,GAC/B5C,GAAc,IAAP6C,EAAY,GAAK7C,EAAI2B,UAAUkB,EAAI,GAE3C,MAAMrB,EAAIxB,EAAI8C,YAAY,KAC1B,IAAW,IAAPtB,EAAU,CAEb,OAAOkB,EADK1C,EAAI2B,UAAUH,EAAI,GAAGuB,gBACX,MAGxB,OAAO,KA/BGC,CAAYhD,EAAKC,EAAKgD,gBAC5BrB,IACHrD,EAASwB,EAAGE,EAAKiD,eACjB3E,EAASwB,EAAGE,EAAKiD,eAAe,EAAMtB,IAIxC,SAASW,EAAcvC,GACtB,QAAY,OAARA,GAAwB,KAARA,GACdA,EAAIlB,WAAY,GAAEiD,SAASoB,aAAapB,SAASqB,UACjDpD,EAAIqD,MAAM,kBAAmBrD,EAAIqD,MAAM,UAwB9C/E,EAAGgF,UAnKH,SAAeC,EAAItD,EAAO,IACzBA,EAAOuD,OAAOC,OAAO,CACpBtD,eAAmB,eACnBY,gBAAmB,gBACnB0B,gBAAmB,gBACnBD,kBAAmB,kBACnBU,cAAmB,cACnB7B,eAAmBhC,EACnB4D,eAAmB3D,EACnBiD,cAAmBA,GACjBtC,GAEH,IAAK,MAAMF,KAAKwD,EACfzD,EAASC,EAAGA,EAAE2D,aAAa,QAASzD,IAuJtC3B,EAAGqF,eAnJH,SAAoBJ,EAAItD,EAAO,IAC9BA,EAAOuD,OAAOC,OAAO,CACpBhB,gBAAmB,gBACnBD,kBAAmB,kBACnBU,cAAmB,cACnBD,eAAmB3D,EACnBiD,cAAmBA,GACjBtC,GAEH,IAAK,MAAMF,KAAKwD,EACfpC,EAAcpB,EAAGA,EAAE2D,aAAa,QAASzD,IA4I3C3B,EAAGsF,gBAAkB1D,EAlLtB,GAFD,CAyQG7B,OAAM","file":"link-type.min.js","sourcesContent":["/**\n *\n * Link Style - Type (JS)\n *\n * @author Takuto Yanagida\n * @version 2021-11-11\n *\n */\n\n\nwindow['NACSS'] = window['NACSS'] || {};\n\n\n(function (NS) {\n\n\t(function () {\n\t\t/**\n\t\t *\n\t\t * Link Type (JS)\n\t\t *\n\t\t * @author Takuto Yanagida\n\t\t * @version 2021-11-10\n\t\t *\n\t\t */\n\t\t\n\t\t\n\t\tfunction apply(as, opts = {}) {\n\t\t\topts = Object.assign({\n\t\t\t\tstyleLinkImage   : ':ncLinkImage',\n\t\t\t\tstyleLinkSimple  : ':ncLinkSimple',\n\t\t\t\tstyleLinkAnchor  : ':ncLinkAnchor',\n\t\t\t\tstyleLinkExternal: ':ncLinkExternal',\n\t\t\t\tstyleLinkFile    : ':ncLinkFile',\n\t\t\t\tallowedClasses   : ALLOWED_CLASSES,\n\t\t\t\textensionTable   : EXT_TABLE,\n\t\t\t\tisUrlExternal    : isUrlExternal,\n\t\t\t}, opts);\n\t\t\n\t\t\tfor (const a of as) {\n\t\t\t\taddClass(a, a.getAttribute('href'), opts);\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction applyByUrl(as, opts = {}) {\n\t\t\topts = Object.assign({\n\t\t\t\tstyleLinkAnchor  : ':ncLinkAnchor',\n\t\t\t\tstyleLinkExternal: ':ncLinkExternal',\n\t\t\t\tstyleLinkFile    : ':ncLinkFile',\n\t\t\t\textensionTable   : EXT_TABLE,\n\t\t\t\tisUrlExternal    : isUrlExternal,\n\t\t\t}, opts);\n\t\t\n\t\t\tfor (const a of as) {\n\t\t\t\taddClassByUrl(a, a.getAttribute('href'), opts);\n\t\t\t}\n\t\t}\n\t\t\n\t\tconst ALLOWED_CLASSES = [\n\t\t\t'alignleft',\n\t\t\t'aligncenter',\n\t\t\t'alignright',\n\t\t\t'size-thumbnail',\n\t\t\t'size-small',\n\t\t\t'size-medium-small',\n\t\t\t'size-medium',\n\t\t\t'size-medium-large',\n\t\t\t'size-medium_large',\n\t\t\t'size-large',\n\t\t\t'size-full'\n\t\t];\n\t\t\n\t\tconst EXT_TABLE = {\n\t\t\tdoc : 'doc',\n\t\t\tdocx: 'doc',\n\t\t\txls : 'xls',\n\t\t\txlsx: 'xls',\n\t\t\tppt : 'ppt',\n\t\t\tpptx: 'ppt',\n\t\t\tpdf : 'pdf'\n\t\t};\n\t\t\n\t\t\n\t\t// -------------------------------------------------------------------------\n\t\t\n\t\t\n\t\tfunction addClass(a, url, opts) {\n\t\t\tif (isLinkImage(a)) {\n\t\t\t\tsetClass(a, opts.styleLinkImage);\n\t\t\t} else {\n\t\t\t\tif (isLinkEmpty(a)) {\n\t\t\t\t\taddClassByUrl(a, url, opts);\n\t\t\t\t} else if (isLinkSimple(a)) {\n\t\t\t\t\tsetClass(a, opts.styleLinkSimple);\n\t\t\t\t\tif (isLinkSimpleUrl(a, url)) {\n\t\t\t\t\t\tsetClass(a, opts.styleLinkSimple, true, 'url');\n\t\t\t\t\t}\n\t\t\t\t\taddClassByUrl(a, url, opts);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction isLinkImage(a, opts) {\n\t\t\tif (a.className) {\n\t\t\t\tfor (const c of a.className.split(' ')) {\n\t\t\t\t\tif (!opts.allowedClasses.includes(c)) return false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet ok = false;\n\t\t\tfor (const c of a.childNodes) {\n\t\t\t\tif (c.nodeType === 1) {  // ELEMENT_NODE\n\t\t\t\t\tif (!ok && c.tagName === 'IMG') {\n\t\t\t\t\t\tok = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tok = false;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn ok;\n\t\t}\n\t\t\n\t\tfunction isLinkSimple(a) {\n\t\t\tif (a.className) return false;\n\t\t\tconst cs = a.childNodes;\n\t\t\tif (cs.length === 0) return false;\n\t\t\tfor (const c of cs) {\n\t\t\t\tif (c.className) return false;\n\t\t\t\tif (c.nodeType === 1) {  // ELEMENT_NODE\n\t\t\t\t\tif (c.tagName !== 'BR' && !getComputedStyle(c).display.includes('inline')) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\t\n\t\tfunction isLinkEmpty(a) {\n\t\t\treturn !a.className && a.childNodes.length === 0;\n\t\t}\n\t\t\n\t\tfunction isLinkSimpleUrl(a, url) {\n\t\t\treturn url !== null && url !== '' && a.childNodes.length && a.innerHTML.trim() === url;\n\t\t}\n\t\t\n\t\t\n\t\t// -------------------------------------------------------------------------\n\t\t\n\t\t\n\t\tfunction addClassByUrl(a, url, opts) {\n\t\t\tconst outIsUp = [false];\n\t\t\tif (isUrlAnchor(url, a, outIsUp)) {\n\t\t\t\tsetClass(a, opts.styleLinkAnchor, true, outIsUp[0] ? 'up' : '');\n\t\t\t} else if (opts.isUrlExternal(url)) {\n\t\t\t\tsetClass(a, opts.styleLinkExternal);\n\t\t\t}\n\t\t\tconst t = getFileType(url, opts.extensionTable);\n\t\t\tif (t) {\n\t\t\t\tsetClass(a, opts.styleLinkFile);\n\t\t\t\tsetClass(a, opts.styleLinkFile, true, t);\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction isUrlExternal(url) {\n\t\t\tif (url !== null && url !== '') {\n\t\t\t\tif (!url.startsWith(`${location.protocol}//${location.host}`)) {\n\t\t\t\t\tif (url.match(/^https?:\\/\\//) || url.match(/^\\/\\//)) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\tfunction getFileType(url, extTab) {\n\t\t\tif (url !== null && url !== '' && !url.endsWith('/')) {\n\t\t\t\tconst d = url.indexOf('//');\n\t\t\t\tif (d !== -1) {\n\t\t\t\t\tconst s = url.indexOf('/', d + 2);\n\t\t\t\t\turl = (s === -1) ? '' : url.substring(s + 1);\n\t\t\t\t}\n\t\t\t\tconst p = url.lastIndexOf('.');\n\t\t\t\tif (p !== -1) {\n\t\t\t\t\tconst ext = url.substring(p + 1).toLowerCase();\n\t\t\t\t\treturn extTab[ext] ?? null;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t\t\n\t\tNS.linkApply      = apply;\n\t\tNS.linkApplyByUrl = applyByUrl;\n\n\t\t// Export the function\n\t\tNS.linkIsLinkImage = isLinkImage;\n\t})();\n\n\t/**\n\t *\n\t * Style Class Utilities\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-11-11\n\t *\n\t */\n\t\n\t\n\tfunction hasClass(tar, cls) {\n\t\tconst key = cls.substr(1);\n\t\tif (cls.startsWith(':')) {\n\t\t\treturn tar.dataset[key] !== undefined;\n\t\t} else {\n\t\t\treturn tar.classList.contains(key);\n\t\t}\n\t}\n\t\n\tfunction setClass(tar, cls, enabled = true, val = '') {\n\t\tconst key = cls.substr(1);\n\t\tif (cls.startsWith(':')) {\n\t\t\tif (enabled) {\n\t\t\t\ttar.dataset[key] = val;\n\t\t\t} else {\n\t\t\t\tdelete tar.dataset[key];\n\t\t\t}\n\t\t} else {\n\t\t\tconst c = [key, val].join('-');\n\t\t\tif (enabled) {\n\t\t\t\ttar.classList.add(c);\n\t\t\t} else {\n\t\t\t\ttar.classList.remove(c);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction getSelector(cls) {\n\t\tif (cls.startsWith(':')) {\n\t\t\treturn `*[data-${cls.substr(1).replace(/([A-Z])/g, c => '-' + c.charAt(0).toLowerCase())}]`;\n\t\t} else {\n\t\t\treturn `*${cls}`;\n\t\t}\n\t}\n\t\n\t/**\n\t *\n\t * Common Functions\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-11-10\n\t *\n\t */\n\t\n\t\n\tfunction isUrlAnchor(url, a = null, outIsUp = null) {\n\t\tif (url !== null && url !== '') {\n\t\t\tconst p = url.indexOf('#');\n\t\t\tif (p !== -1) {\n\t\t\t\tconst id = url.substring(p + 1);\n\t\t\t\tif (id.length) {\n\t\t\t\t\tconst t = document.getElementById(id);\n\t\t\t\t\tif (t !== null) {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tp === 0 ||\n\t\t\t\t\t\t\turl.substring(0, p) === location.href.replace(location.hash ? location.hash : '#', '')\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tif (a && outIsUp) {\n\t\t\t\t\t\t\t\tconst from = a.getBoundingClientRect().top;\n\t\t\t\t\t\t\t\tconst to   = t.getBoundingClientRect().top;\n\t\t\t\t\t\t\t\tif (to < from) outIsUp[0] = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\t\n\n})(window['NACSS']);\n"]}