{"version":3,"sources":["link.js"],"names":["window","NS","setClass","tar","cls","enabled","val","key","substr","startsWith","dataset","c","join","classList","add","remove","isUrlAnchor","url","a","outIsUp","p","indexOf","id","substring","length","t","document","getElementById","location","href","replace","hash","from","getBoundingClientRect","top","ALLOWED_CLASSES","EXT_TABLE","doc","docx","xls","xlsx","ppt","pptx","pdf","addClass","opts","isLinkImage","styleLinkImage","className","childNodes","isLinkEmpty","cs","nodeType","tagName","getComputedStyle","display","includes","isLinkSimple","styleLinkSimple","innerHTML","trim","isLinkSimpleUrl","addClassByUrl","split","allowedClasses","ok","styleLinkAnchor","isUrlExternal","styleLinkExternal","extTab","endsWith","d","s","lastIndexOf","toLowerCase","getFileType","extensionTable","styleLinkFile","protocol","host","match","linkApply","as","Object","assign","getAttribute","linkApplyByUrl","linkIsLinkImage","isScrolling","anchorWithListener","Set","apply","has","addEventListener","e","button","ctrlKey","shiftKey","altKey","metaKey","currentTarget","idx","duration","DURATION","documentElement","matchMedia","matches","stopPropagation","preventDefault","smoothScrollToElement","history","pushState","smoothScrollToHash","doClick","focus","start","pageYOffset","timeStart","posY","getScrollPos","wh","offsetHeight","loop","time","b","scrollTo","requestAnimationFrame","setTimeout","spt","parseInt","scrollPaddingTop","linkAnchorScroll","observedSelector","oes","querySelectorAll","mo","MutationObserver","rs","r","n","addedNodes","oe","observe","childList","subtree"],"mappings":"AAUAA,OAAM,MAAYA,OAAM,OAAa,GAGrC,SAAWC,GA6UV,SAASC,EAASC,EAAKC,EAAKC,GAAU,EAAMC,EAAM,IACjD,MAAMC,EAAMH,EAAII,OAAO,GACvB,GAAIJ,EAAIK,WAAW,KACdJ,EACHF,EAAIO,QAAQH,GAAOD,SAEZH,EAAIO,QAAQH,OAEd,CACN,MAAMI,EAAI,CAACJ,EAAKD,GAAKM,KAAK,KACtBP,EACHF,EAAIU,UAAUC,IAAIH,GAElBR,EAAIU,UAAUE,OAAOJ,IAuBxB,SAASK,EAAYC,EAAKC,EAAI,KAAMC,EAAU,MAC7C,GAAY,OAARF,GAAwB,KAARA,EAAY,CAC/B,MAAMG,EAAIH,EAAII,QAAQ,KACtB,IAAW,IAAPD,EAAU,CACb,MAAME,EAAKL,EAAIM,UAAUH,EAAI,GAC7B,GAAIE,EAAGE,OAAQ,CACd,MAAMC,EAAIC,SAASC,eAAeL,GAClC,GAAU,OAANG,IAEI,IAANL,GACAH,EAAIM,UAAU,EAAGH,KAAOQ,SAASC,KAAKC,QAAQF,SAASG,KAAOH,SAASG,KAAO,IAAK,KAClF,CACD,GAAIb,GAAKC,EAAS,CACjB,MAAMa,EAAOd,EAAEe,wBAAwBC,IAC1BT,EAAEQ,wBAAwBC,IAC9BF,IAAMb,EAAQ,IAAK,GAE7B,OAAO,KAMZ,OAAO,GAtYR,WA0CC,MAAMgB,EAAkB,CACvB,YACA,cACA,aACA,iBACA,aACA,oBACA,cACA,oBACA,oBACA,aACA,aAGKC,EAAY,CACjBC,IAAM,MACNC,KAAM,MACNC,IAAM,MACNC,KAAM,MACNC,IAAM,MACNC,KAAM,MACNC,IAAM,OAOP,SAASC,EAAS1B,EAAGD,EAAK4B,GACrBC,EAAY5B,GACfhB,EAASgB,EAAG2B,EAAKE,iBAiDnB,SAAqB7B,GACpB,OAAQA,EAAE8B,WAAqC,IAAxB9B,EAAE+B,WAAWzB,OAhD/B0B,CAAYhC,GAgClB,SAAsBA,GACrB,GAAIA,EAAE8B,UAAW,OAAO,EACxB,MAAMG,EAAKjC,EAAE+B,WACb,GAAkB,IAAdE,EAAG3B,OAAc,OAAO,EAC5B,IAAK,MAAMb,KAAKwC,EAAI,CACnB,GAAIxC,EAAEqC,UAAW,OAAO,EACxB,GAAmB,IAAfrC,EAAEyC,UACa,OAAdzC,EAAE0C,UAAqBC,iBAAiB3C,GAAG4C,QAAQC,SAAS,UAC/D,OAAO,EAIV,OAAO,EA1CKC,CAAavC,KACvBhB,EAASgB,EAAG2B,EAAKa,iBAgDpB,SAAyBxC,EAAGD,GAC3B,OAAe,OAARA,GAAwB,KAARA,GAAcC,EAAE+B,WAAWzB,QAAUN,EAAEyC,UAAUC,SAAW3C,EAhD7E4C,CAAgB3C,EAAGD,IACtBf,EAASgB,EAAG2B,EAAKa,iBAAiB,EAAM,OAEzCI,EAAc5C,EAAGD,EAAK4B,IANtBiB,EAAc5C,EAAGD,EAAK4B,GAWzB,SAASC,EAAY5B,EAAG2B,GACvB,GAAI3B,EAAE8B,UACL,IAAK,MAAMrC,KAAKO,EAAE8B,UAAUe,MAAM,KACjC,IAAKlB,EAAKmB,eAAeR,SAAS7C,GAAI,OAAO,EAG/C,IAAIsD,GAAK,EACT,IAAK,MAAMtD,KAAKO,EAAE+B,WACjB,GAAmB,IAAftC,EAAEyC,SAAgB,CACrB,GAAKa,GAAoB,QAAdtD,EAAE0C,QAEN,CACNY,GAAK,EACL,MAHAA,GAAK,EAOR,OAAOA,EA8BR,SAASH,EAAc5C,EAAGD,EAAK4B,GAC9B,MAAM1B,EAAU,EAAC,GACbH,EAAYC,EAAKC,EAAGC,GACvBjB,EAASgB,EAAG2B,EAAKqB,iBAAiB,EAAM/C,EAAQ,GAAK,KAAO,IAClD0B,EAAKsB,cAAclD,IAC7Bf,EAASgB,EAAG2B,EAAKuB,mBAElB,MAAM3C,EAkBP,SAAqBR,EAAKoD,GACzB,GAAY,OAARpD,GAAwB,KAARA,IAAeA,EAAIqD,SAAS,KAAM,CACrD,MAAMC,EAAItD,EAAII,QAAQ,MACtB,IAAW,IAAPkD,EAAU,CACb,MAAMC,EAAIvD,EAAII,QAAQ,IAAKkD,EAAI,GAC/BtD,GAAc,IAAPuD,EAAY,GAAKvD,EAAIM,UAAUiD,EAAI,GAE3C,MAAMpD,EAAIH,EAAIwD,YAAY,KAC1B,IAAW,IAAPrD,EAAU,CAEb,OAAOiD,EADKpD,EAAIM,UAAUH,EAAI,GAAGsD,gBACX,MAGxB,OAAO,KA/BGC,CAAY1D,EAAK4B,EAAK+B,gBAC5BnD,IACHvB,EAASgB,EAAG2B,EAAKgC,eACjB3E,EAASgB,EAAG2B,EAAKgC,eAAe,EAAMpD,IAIxC,SAAS0C,EAAclD,GACtB,QAAY,OAARA,GAAwB,KAARA,GACdA,EAAIR,WAAY,GAAEmB,SAASkD,aAAalD,SAASmD,UACjD9D,EAAI+D,MAAM,kBAAmB/D,EAAI+D,MAAM,UAwB9C/E,EAAGgF,UAnKH,SAAeC,EAAIrC,EAAO,IACzBA,EAAOsC,OAAOC,OAAO,CACpBrC,eAAmB,eACnBW,gBAAmB,gBACnBQ,gBAAmB,gBACnBE,kBAAmB,kBACnBS,cAAmB,cACnBb,eAAmB7B,EACnByC,eAAmBxC,EACnB+B,cAAmBA,GACjBtB,GAEH,IAAK,MAAM3B,KAAKgE,EACftC,EAAS1B,EAAGA,EAAEmE,aAAa,QAASxC,IAuJtC5C,EAAGqF,eAnJH,SAAoBJ,EAAIrC,EAAO,IAC9BA,EAAOsC,OAAOC,OAAO,CACpBlB,gBAAmB,gBACnBE,kBAAmB,kBACnBS,cAAmB,cACnBD,eAAmBxC,EACnB+B,cAAmBA,GACjBtB,GAEH,IAAK,MAAM3B,KAAKgE,EACfpB,EAAc5C,EAAGA,EAAEmE,aAAa,QAASxC,IA2I3C5C,EAAGsF,gBAAkBzC,EAjLtB,GAoLA,WAaC,IAAI0C,GAAc,EAClB,MAAMC,EAAqB,IAAIC,IAmC/B,SAASC,EAAMzE,EAAG2B,GACjB,IAAK4C,EAAmBG,IAAI1E,GAAI,EAEhB,MAAXA,EAAEW,MAA2B,SAAXX,EAAEW,MAAmBb,EAAYE,EAAEW,SACxDX,EAAE2E,iBAAiB,SAFpB,SAAiBC,IAQnB,SAAiBA,EAAGjD,GACnB,GAAiB,IAAbiD,EAAEC,QAAgBD,EAAEE,SAAWF,EAAEG,UAAYH,EAAEI,QAAUJ,EAAEK,QAAS,OACxE,MAAMtE,EAAOiE,EAAEM,cAAcf,aAAa,QACpCgB,EAAOxE,EAAKR,QAAQ,MACb,IAATgF,GAKL,SAA4BP,EAAG/D,EAAMuE,EAAWC,KAC/C,MACMpG,EADgB,OAAT4B,GAA0B,KAATA,GAAwB,MAATA,GAAyB,SAATA,EAC3CL,SAAS8E,gBAAkB9E,SAASC,eAAeI,EAAKR,UAAU,IAChFpB,IAAQH,OAAOyG,WAAW,oCAAoCC,UACjEZ,EAAEa,kBACFb,EAAEc,iBAEFC,EAAsB1G,EAAKmG,GACvBvE,IAAS/B,OAAO4B,SAASG,MAC5B+E,QAAQC,UAAU,KAAM,KAAgB,SAAThF,EAAkB,GAAKA,IAbvDiF,CAAmBlB,EAAGjE,EAAKN,UAAU8E,GAAMxD,EAAKyD,UAb1BW,CAAQnB,EAAGjD,MAGhC4C,EAAmB3E,IAAII,KAgC1B,SAAS2F,EAAsB1G,EAAKmG,EAAWC,IAAUW,GAAQ,GAChE,MAAMC,EAAQnH,OAAOoH,YACrB,IAGIC,EAHAC,EAAOC,EAAapH,GACpBqH,EAAO9F,SAAS8E,gBAAgBiB,aAMpC,SAASC,EAAKC,GAyBf,IAAgBlG,EAAGmG,EAAGjH,EAxBf6E,IACDgC,IAAO9F,SAAS8E,gBAAgBiB,eACnCH,EAAOC,EAAapH,GACpBqH,EAAO9F,SAAS8E,gBAAgBiB,cAEjCzH,OAAO6H,SAAS,GAmBFpG,EAnBYkG,EAAON,EAmBhBO,EAnB2BT,EAmBxBxG,EAnB+B2G,GAoBpD7F,GApB0D6E,EAoBjD,GACD,GAAW3F,EAAIiH,GAAK,EAAInG,EAAIA,EAAImG,GACxCnG,MACSd,EAAIiH,GAAK,GAAKnG,GAAKA,EAAI,GAAK,GAAKmG,KAtBrCD,EAAON,EAAYf,EACtBwB,sBAAsBJ,IAEtB1H,OAAO6H,SAAS,EAAGN,EAAapH,IAChC4H,YAAW,IAAM/H,OAAO6H,SAAS,EAAGN,EAAapH,KAAO,IACpD+G,GAAS/G,GAAOA,IAAQuB,SAAS8E,iBACpCrG,EAAI+G,QAEL1B,GAAc,IAlBhBA,GAAc,EACdsC,uBAAuBH,IAAWN,EAAYM,EAAMD,EAAKC,MAsB1D,SAASJ,EAAapH,GACrB,MAAM6H,EAAMC,SAAS3E,iBAAiB5B,SAAS8E,iBAAiB0B,kBAChE,OAAO/H,EAAI8B,wBAAwBC,IAAMlC,OAAOoH,YAAcY,EAU/D/H,EAAGkI,iBA/GH,SAAoBjD,EAAIrC,EAAO,IAC9BA,EAAOsC,OAAOC,OAAO,CACpBkB,SAPe,IAQf8B,iBAAkB,MAChBvF,GAEH,IAAK,MAAM3B,KAAKgE,EACfS,EAAMzE,EAAG2B,GAIV,GAFAnB,SAASmE,iBAAiB,SAAS,KAAQL,GAAc,KAErD3C,EAAI,iBAAsB,CAC7B,MAAMwF,EAAM3G,SAAS4G,iBAAiBzF,EAAI,kBAC1C,GAAIwF,EAAI7G,OAAQ,CACf,MAAM+G,EAAK,IAAIC,kBAAiBC,IAC/B,IAAK,MAAMC,KAAKD,EACf,IAAK,MAAME,KAAKD,EAAEE,WACE,IAAfD,EAAEvF,UAAgC,MAAduF,EAAEtF,SACzBsC,EAAMgD,EAAG9F,MAKb,IAAK,MAAMgG,KAAMR,EAChBE,EAAGO,QAAQD,EAAI,CACdE,WAAW,EACXC,SAAW,OAuFhB/I,EAAG4G,sBAAwBA,EAjI5B,GAtLD,CA4YG7G,OAAM","file":"link.min.js","sourcesContent":["/**\n *\n * Link\n *\n * @author Takuto Yanagida\n * @version 2021-11-11\n *\n */\n\n\nwindow['NACSS'] = window['NACSS'] || {};\n\n\n(function (NS) {\n\n\t(function () {\n\t\t/**\n\t\t *\n\t\t * Type\n\t\t *\n\t\t * @author Takuto Yanagida\n\t\t * @version 2021-11-10\n\t\t *\n\t\t */\n\t\t\n\t\t\n\t\tfunction apply(as, opts = {}) {\n\t\t\topts = Object.assign({\n\t\t\t\tstyleLinkImage   : ':ncLinkImage',\n\t\t\t\tstyleLinkSimple  : ':ncLinkSimple',\n\t\t\t\tstyleLinkAnchor  : ':ncLinkAnchor',\n\t\t\t\tstyleLinkExternal: ':ncLinkExternal',\n\t\t\t\tstyleLinkFile    : ':ncLinkFile',\n\t\t\t\tallowedClasses   : ALLOWED_CLASSES,\n\t\t\t\textensionTable   : EXT_TABLE,\n\t\t\t\tisUrlExternal    : isUrlExternal,\n\t\t\t}, opts);\n\t\t\n\t\t\tfor (const a of as) {\n\t\t\t\taddClass(a, a.getAttribute('href'), opts);\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction applyByUrl(as, opts = {}) {\n\t\t\topts = Object.assign({\n\t\t\t\tstyleLinkAnchor  : ':ncLinkAnchor',\n\t\t\t\tstyleLinkExternal: ':ncLinkExternal',\n\t\t\t\tstyleLinkFile    : ':ncLinkFile',\n\t\t\t\textensionTable   : EXT_TABLE,\n\t\t\t\tisUrlExternal    : isUrlExternal,\n\t\t\t}, opts);\n\t\t\n\t\t\tfor (const a of as) {\n\t\t\t\taddClassByUrl(a, a.getAttribute('href'), opts);\n\t\t\t}\n\t\t}\n\t\t\n\t\tconst ALLOWED_CLASSES = [\n\t\t\t'alignleft',\n\t\t\t'aligncenter',\n\t\t\t'alignright',\n\t\t\t'size-thumbnail',\n\t\t\t'size-small',\n\t\t\t'size-medium-small',\n\t\t\t'size-medium',\n\t\t\t'size-medium-large',\n\t\t\t'size-medium_large',\n\t\t\t'size-large',\n\t\t\t'size-full'\n\t\t];\n\t\t\n\t\tconst EXT_TABLE = {\n\t\t\tdoc : 'doc',\n\t\t\tdocx: 'doc',\n\t\t\txls : 'xls',\n\t\t\txlsx: 'xls',\n\t\t\tppt : 'ppt',\n\t\t\tpptx: 'ppt',\n\t\t\tpdf : 'pdf'\n\t\t};\n\t\t\n\t\t\n\t\t// -------------------------------------------------------------------------\n\t\t\n\t\t\n\t\tfunction addClass(a, url, opts) {\n\t\t\tif (isLinkImage(a)) {\n\t\t\t\tsetClass(a, opts.styleLinkImage);\n\t\t\t} else {\n\t\t\t\tif (isLinkEmpty(a)) {\n\t\t\t\t\taddClassByUrl(a, url, opts);\n\t\t\t\t} else if (isLinkSimple(a)) {\n\t\t\t\t\tsetClass(a, opts.styleLinkSimple);\n\t\t\t\t\tif (isLinkSimpleUrl(a, url)) {\n\t\t\t\t\t\tsetClass(a, opts.styleLinkSimple, true, 'url');\n\t\t\t\t\t}\n\t\t\t\t\taddClassByUrl(a, url, opts);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction isLinkImage(a, opts) {\n\t\t\tif (a.className) {\n\t\t\t\tfor (const c of a.className.split(' ')) {\n\t\t\t\t\tif (!opts.allowedClasses.includes(c)) return false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet ok = false;\n\t\t\tfor (const c of a.childNodes) {\n\t\t\t\tif (c.nodeType === 1) {  // ELEMENT_NODE\n\t\t\t\t\tif (!ok && c.tagName === 'IMG') {\n\t\t\t\t\t\tok = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tok = false;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn ok;\n\t\t}\n\t\t\n\t\tfunction isLinkSimple(a) {\n\t\t\tif (a.className) return false;\n\t\t\tconst cs = a.childNodes;\n\t\t\tif (cs.length === 0) return false;\n\t\t\tfor (const c of cs) {\n\t\t\t\tif (c.className) return false;\n\t\t\t\tif (c.nodeType === 1) {  // ELEMENT_NODE\n\t\t\t\t\tif (c.tagName !== 'BR' && !getComputedStyle(c).display.includes('inline')) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\t\n\t\tfunction isLinkEmpty(a) {\n\t\t\treturn !a.className && a.childNodes.length === 0;\n\t\t}\n\t\t\n\t\tfunction isLinkSimpleUrl(a, url) {\n\t\t\treturn url !== null && url !== '' && a.childNodes.length && a.innerHTML.trim() === url;\n\t\t}\n\t\t\n\t\t\n\t\t// -------------------------------------------------------------------------\n\t\t\n\t\t\n\t\tfunction addClassByUrl(a, url, opts) {\n\t\t\tconst outIsUp = [false];\n\t\t\tif (isUrlAnchor(url, a, outIsUp)) {\n\t\t\t\tsetClass(a, opts.styleLinkAnchor, true, outIsUp[0] ? 'up' : '');\n\t\t\t} else if (opts.isUrlExternal(url)) {\n\t\t\t\tsetClass(a, opts.styleLinkExternal);\n\t\t\t}\n\t\t\tconst t = getFileType(url, opts.extensionTable);\n\t\t\tif (t) {\n\t\t\t\tsetClass(a, opts.styleLinkFile);\n\t\t\t\tsetClass(a, opts.styleLinkFile, true, t);\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction isUrlExternal(url) {\n\t\t\tif (url !== null && url !== '') {\n\t\t\t\tif (!url.startsWith(`${location.protocol}//${location.host}`)) {\n\t\t\t\t\tif (url.match(/^https?:\\/\\//) || url.match(/^\\/\\//)) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\tfunction getFileType(url, extTab) {\n\t\t\tif (url !== null && url !== '' && !url.endsWith('/')) {\n\t\t\t\tconst d = url.indexOf('//');\n\t\t\t\tif (d !== -1) {\n\t\t\t\t\tconst s = url.indexOf('/', d + 2);\n\t\t\t\t\turl = (s === -1) ? '' : url.substring(s + 1);\n\t\t\t\t}\n\t\t\t\tconst p = url.lastIndexOf('.');\n\t\t\t\tif (p !== -1) {\n\t\t\t\t\tconst ext = url.substring(p + 1).toLowerCase();\n\t\t\t\t\treturn extTab[ext] ?? null;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t\t\n\t\tNS.linkApply      = apply;\n\t\tNS.linkApplyByUrl = applyByUrl;\n\n\t\tNS.linkIsLinkImage = isLinkImage;\n\t})();\n\n\t(function () {\n\t\t/**\n\t\t *\n\t\t * Anchor Scroll\n\t\t *\n\t\t * @author Takuto Yanagida\n\t\t * @version 2021-11-29\n\t\t *\n\t\t */\n\t\t\n\t\t\n\t\tconst DURATION = 400;\n\t\t\n\t\tlet isScrolling = false;\n\t\tconst anchorWithListener = new Set();\n\t\t\n\t\tfunction initialize(as, opts = {}) {\n\t\t\topts = Object.assign({\n\t\t\t\tduration        : DURATION,\n\t\t\t\tobservedSelector: null,\n\t\t\t}, opts);\n\t\t\n\t\t\tfor (const a of as) {\n\t\t\t\tapply(a, opts);\n\t\t\t}\n\t\t\tdocument.addEventListener('wheel', () => { isScrolling = false; });\n\t\t\n\t\t\tif (opts['observedSelector']) {\n\t\t\t\tconst oes = document.querySelectorAll(opts['observedSelector']);\n\t\t\t\tif (oes.length) {\n\t\t\t\t\tconst mo = new MutationObserver(rs => {\n\t\t\t\t\t\tfor (const r of rs) {\n\t\t\t\t\t\t\tfor (const n of r.addedNodes) {\n\t\t\t\t\t\t\t\tif (n.nodeType === 1 && n.tagName === 'A') {\n\t\t\t\t\t\t\t\t\tapply(n, opts);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tfor (const oe of oes) {\n\t\t\t\t\t\tmo.observe(oe, {\n\t\t\t\t\t\t\tchildList: true,\n\t\t\t\t\t\t\tsubtree  : true,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction apply(a, opts) {\n\t\t\tif (!anchorWithListener.has(a)) {\n\t\t\t\tfunction onClick(e) { doClick(e, opts); }\n\t\t\t\tif (a.href === '#' || a.href === '#top' || isUrlAnchor(a.href)) {\n\t\t\t\t\ta.addEventListener('click', onClick);\n\t\t\t\t\tanchorWithListener.add(a);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction doClick(e, opts) {\n\t\t\tif (e.button !== 0 || e.ctrlKey || e.shiftKey || e.altKey || e.metaKey) return;\n\t\t\tconst href = e.currentTarget.getAttribute('href');\n\t\t\tconst idx  = href.indexOf('#');\n\t\t\tif (idx !== -1) {\n\t\t\t\tsmoothScrollToHash(e, href.substring(idx), opts.duration);\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction smoothScrollToHash(e, hash, duration = DURATION) {\n\t\t\tconst top = (hash === null || hash === '' || hash === '#' || hash === '#top');\n\t\t\tconst tar = top ? document.documentElement : document.getElementById(hash.substring(1));\n\t\t\tif (tar && !window.matchMedia('(prefers-reduced-motion: reduce)').matches) {\n\t\t\t\te.stopPropagation();\n\t\t\t\te.preventDefault();\n\t\t\n\t\t\t\tsmoothScrollToElement(tar, duration);\n\t\t\t\tif (hash !== window.location.hash) {\n\t\t\t\t\thistory.pushState(null, null, (hash === '#top' ? '' : hash));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\t\t// -----------------------------------------------------------------------------\n\t\t\n\t\t\n\t\tfunction smoothScrollToElement(tar, duration = DURATION, focus = true) {\n\t\t\tconst start = window.pageYOffset;\n\t\t\tlet posY = getScrollPos(tar);\n\t\t\tlet wh   = document.documentElement.offsetHeight;\n\t\t\n\t\t\tlet timeStart;\n\t\t\tisScrolling = true;\n\t\t\trequestAnimationFrame((time) => { timeStart = time; loop(time); });\n\t\t\n\t\t\tfunction loop(time) {\n\t\t\t\tif (!isScrolling) return;\n\t\t\t\tif (wh !== document.documentElement.offsetHeight) {  // For delay loading\n\t\t\t\t\tposY = getScrollPos(tar);\n\t\t\t\t\twh   = document.documentElement.offsetHeight;\n\t\t\t\t}\n\t\t\t\twindow.scrollTo(0, easing(time - timeStart, start, posY, duration));\n\t\t\t\tif (time - timeStart < duration) {\n\t\t\t\t\trequestAnimationFrame(loop)\n\t\t\t\t} else {\n\t\t\t\t\twindow.scrollTo(0, getScrollPos(tar));\n\t\t\t\t\tsetTimeout(() => window.scrollTo(0, getScrollPos(tar)), 50);\n\t\t\t\t\tif (focus && tar && tar !== document.documentElement) {\n\t\t\t\t\t\ttar.focus();\n\t\t\t\t\t}\n\t\t\t\t\tisScrolling = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction getScrollPos(tar) {\n\t\t\tconst spt = parseInt(getComputedStyle(document.documentElement).scrollPaddingTop);\n\t\t\treturn tar.getBoundingClientRect().top + window.pageYOffset - spt;\n\t\t}\n\t\t\n\t\tfunction easing(t, b, c, d) {\n\t\t\tt /= d / 2;\n\t\t\tif (t < 1) return (c - b) / 2 * t * t + b;\n\t\t\tt--;\n\t\t\treturn -(c - b) / 2 * (t * (t - 2) - 1) + b;\n\t\t}\n\t\t\n\t\tNS.linkAnchorScroll = initialize;\n\n\t\tNS.smoothScrollToElement = smoothScrollToElement;\n\t})();\n\n\t/**\n\t *\n\t * Style Class Utilities\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-11-11\n\t *\n\t */\n\t\n\t\n\tfunction hasClass(tar, cls) {\n\t\tconst key = cls.substr(1);\n\t\tif (cls.startsWith(':')) {\n\t\t\treturn tar.dataset[key] !== undefined;\n\t\t} else {\n\t\t\treturn tar.classList.contains(key);\n\t\t}\n\t}\n\t\n\tfunction setClass(tar, cls, enabled = true, val = '') {\n\t\tconst key = cls.substr(1);\n\t\tif (cls.startsWith(':')) {\n\t\t\tif (enabled) {\n\t\t\t\ttar.dataset[key] = val;\n\t\t\t} else {\n\t\t\t\tdelete tar.dataset[key];\n\t\t\t}\n\t\t} else {\n\t\t\tconst c = [key, val].join('-');\n\t\t\tif (enabled) {\n\t\t\t\ttar.classList.add(c);\n\t\t\t} else {\n\t\t\t\ttar.classList.remove(c);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction getSelector(cls) {\n\t\tif (cls.startsWith(':')) {\n\t\t\treturn `*[data-${cls.substr(1).replace(/([A-Z])/g, c => '-' + c.charAt(0).toLowerCase())}]`;\n\t\t} else {\n\t\t\treturn `*${cls}`;\n\t\t}\n\t}\n\t\n\t/**\n\t *\n\t * Common Functions\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-11-10\n\t *\n\t */\n\t\n\t\n\tfunction isUrlAnchor(url, a = null, outIsUp = null) {\n\t\tif (url !== null && url !== '') {\n\t\t\tconst p = url.indexOf('#');\n\t\t\tif (p !== -1) {\n\t\t\t\tconst id = url.substring(p + 1);\n\t\t\t\tif (id.length) {\n\t\t\t\t\tconst t = document.getElementById(id);\n\t\t\t\t\tif (t !== null) {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tp === 0 ||\n\t\t\t\t\t\t\turl.substring(0, p) === location.href.replace(location.hash ? location.hash : '#', '')\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tif (a && outIsUp) {\n\t\t\t\t\t\t\t\tconst from = a.getBoundingClientRect().top;\n\t\t\t\t\t\t\t\tconst to   = t.getBoundingClientRect().top;\n\t\t\t\t\t\t\t\tif (to < from) outIsUp[0] = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\t\n\n})(window['NACSS']);\n"]}